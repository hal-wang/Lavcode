<!--
    通知页面
    -->
    
<Page x:Class="Hubery.Lavcode.Uwp.View.Notices.NoticesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:hluc="using:Hubery.Lavcode.Uwp.Controls"
      xmlns:hlucc="using:Hubery.Lavcode.Uwp.Controls.Comment"
      xmlns:local="using:Hubery.Lavcode.Uwp.View.Notices"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      NavigationCacheMode="Enabled">

    <Page.DataContext>
        <local:NoticesViewModel x:Name="VM"/>
    </Page.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <hluc:Header Text="通知">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="auto" />
                    <ColumnDefinition Width="200" />
                </Grid.ColumnDefinitions>
                
                <hluc:TitleBar Margin="-100 0 0 0"/>

                <hluc:PathButton Data="M855.557 216.855c35.621-66.153-5.089-152.661-5.089-152.661-91.597 0-157.75 61.064-157.75 61.064-35.621-20.355-152.661-20.355-152.661-20.355s-117.04 0-152.661 20.355c0 0-66.153-61.064-157.75-61.064 0 0-40.71 86.508-5.089 152.661 0 0-81.419 76.331-50.887 239.169 28.691 153.018 162.838 193.371 249.346 193.371 0 0-35.621 30.532-30.532 81.419 0 0-50.887 30.532-101.774 10.177s-76.331-71.242-76.331-71.242-50.887-66.153-101.774-40.71c0 0-15.266 15.266 40.71 40.71 0 0 40.71 61.064 55.976 96.685 15.266 35.621 96.685 66.153 178.105 45.798v117.04s0 10.177-20.355 15.266-20.355 15.266-10.177 15.266H723.25c10.177 0 10.177-10.177-10.177-15.266-20.355-5.089-20.355-15.266-20.355-15.266v-117.04s0.447-61.03 0-81.419c-1.119-51.128-35.621-81.419-35.621-81.419 86.508 0 220.655-40.353 249.346-193.371 30.533-162.837-50.886-239.168-50.886-239.168z"
                                 ToolTipService.ToolTip="{x:Bind NoticesUrl}"
                                 Grid.Column="1"
                                 Click="Git_Click"/>

                <StackPanel Orientation="Horizontal"
                            Grid.Column="2"
                            Margin="40 0 0 0"
                            VerticalAlignment="Center">
                    <TextBlock Text="总数："
                               FontSize="14"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="{x:Bind VM.Issue.Comments,Mode=OneWay}"
                               Visibility="{x:Bind VM.Issue,Mode=OneWay,Converter={StaticResource IsNullConverter},ConverterParameter=T}"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="未获取"
                               FontSize="11"
                               Opacity="0.7"
                               Visibility="{x:Bind VM.Issue,Mode=OneWay,Converter={StaticResource IsNullConverter}}"
                               VerticalAlignment="Center"/>
                    <Button Style="{ThemeResource LightButtonStyle}"
                            ToolTipService.ToolTip="刷新"
                            Margin="20 0"
                            Click="{x:Bind VM.HandleRefresh}">
                        <SymbolIcon Symbol="Refresh"/>
                    </Button>
                </StackPanel>
            </Grid>
        </hluc:Header>
        
        <hlucc:CommentList Comments="{x:Bind VM.Notices,Mode=OneWay}"
                           Grid.Row="1"
                           Margin="0 20 0 0"/>
    </Grid>
</Page>
